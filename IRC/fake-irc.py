"""
Author      : AnyGuy
Date        : 2023-06-28

Title       : fake-irc.py

Description : Here comes text
    
    - xy
    - xy
    - xy

"""

# Import Libraries
import socket
import threading

# Serverkonfiguration
SERVER_HOST = 'localhost'  # Hostadresse des gefälschten Servers
SERVER_PORT = 6667  # Portnummer des gefälschten Servers

def handle_client(client_socket):
    # Empfangen und Antworten auf Nachrichten vom Client
    while True:
        data = client_socket.recv(1024).decode('utf-8')
        if not data:
            # Verbindung unterbrochen
            client_socket.close()
            break
        else:
            # Nachrichtenverarbeitung
            # ...

            # Gefälschte Serverantwort senden
            response = "Server Response"
            client_socket.send(response.encode('utf-8'))

def start_fake_server():
    # Server-Socket erstellen
    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_socket.bind((SERVER_HOST, SERVER_PORT))
    server_socket.listen(1)

    print(f"Gefälschter IRC-Server läuft auf {SERVER_HOST}:{SERVER_PORT}")

    # Verbindungen akzeptieren und Clients behandeln
    while True:
        client_socket, client_address = server_socket.accept()
        print(f"Neue Verbindung von {client_address[0]}:{client_address[1]}")

        # Client in einem separaten Thread behandeln
        client_thread = threading.Thread(target=handle_client, args=(client_socket,))
        client_thread.start()

# Gefälschten IRC-Server starten
start_fake_server()
